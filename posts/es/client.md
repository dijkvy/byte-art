# es 客户端

## 节点客户端

节点客户端作为一个非数据节点加入到本地集群中。节点客户端本身不保存任何数据，但是它知道数据在集群中的哪个节点中，并且可以把请求转发到正确的节点。

## 传输客户端

轻量级的传输客户端可以将请求发送到远程集群。它本身不加入集群，但是它可以将请求转发到集群中的任何一个节点。

节点客户端和传输客户端都是通过 9300 端口进行传输数据和交互。如果端口没有打开，那么节点无法形成集群。

**客户端的版本和es版本要相同** 否则可能无法通信。

## 主节点的职能

1. 一个运行中的 es 实力被称为一个节点，集群是由一个或多个相同 `cluster.name` 配置的节点组成，他们共同承担数据和负载的压力。当有节点加入集群中或者从及群众移除节点时，集群将会重新分布所有的数据。

2. 当一个节点被选举成为主节点时，它将负责管理集群范围内的所有变更，例如增加，删除索引，或者增加，删除节点等。而主节点并不需要设计到文档级别的变更和搜索等操作，所以当集群只有一个只拥有一个主节点的情况下，即使流量增加，主节点也不会成为瓶颈。任何节点都可以成为主节点。

3. 我们可以将请求发送到集群中的任何节点，包括主节点。每个节点都知道任意文档所处的位置，并且能够将请求直接转发到存储我们所需文档的节点。无论我们将请求发送到哪个节点，它都能负责从各个包含我们所需文档的节点收集数据，并将最终的结果返回给客户端。

## 集群的健康

`status` 的三个状态

`green` 表示所有的主分片和副本分片都正常运行

`yellow` 表示所有的主分片都正常运行，但是不是所有的副本分片都正常运行
`red` 表示有主分片没有正常运行
